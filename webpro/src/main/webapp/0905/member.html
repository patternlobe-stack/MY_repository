<!DOCTYPE html><!--0905용 -->
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet"  href="../css/public.css">

<style>
table{
border : 2px solid blue;
border-collapse:  collapse;
}

td{
  width : 100px;
  height : 50px;
  text-align: center;
}
th{
  height : 50px;
  background: skyblue;
}
</style>
<script>

const _$ = (ele) => document.querySelector(ele);

function proc1() {
	fetch("http://localhost/webpro/MemberList.do")
	.then(res =>{
		//res는 실제 데이타가 아니고 Response객체
		//javascript객체로 역직렬화  - 
		if(res.ok) return res.json();
		//return
	})
	.then(datas =>{
		//datas는 실제데이타 
		 //출력모양 만들어서 출력
		 
		code = "<table border='1'>"
	    code += "<tr><th>아이디</th><th>이름</th><th>전화번호</th><th>이메일</th></tr>";
	    
	    datas.forEach( (item, index) =>{
	    	code += `<tr><td>${item['mem_id']}</td><td>${item['mem_name']}</td>`;
	    	code += `<td>${item['mem_hp']}</td><td>${item['mem_mail']}</td></tr>`;
	    });
	    code += "</table>";
	    
	    _$('#result1').innerHTML = code;
    })
    .catch(err=>{
      console.log(err);
    });

}
 const proc2 = async() =>{
	 
	 
	 try {
		
	res = await fetch("http://localhost/webpro/MemberList.do")
	
	console.log("res--",res);
	
	//datas = [];
	//javascript로 역직렬화 
	if(res.ok)datas = await res.json();
			
		code = "<table border='1'>"
		code += "<tr><th>아이디</th><th>이름</th><th>전화번호</th><th>이메일</th></tr>";
		
		datas.forEach(item =>{
			code += `<tr><td>${item['mem_id']}</td><td>${item['mem_name']}</td>`;
	    	code += `<td>${item['mem_hp']}</td><td>${item['mem_mail']}</td></tr>`;   	
		    });
		    code += "</table>";
		    
		    _$('#result1').innerHTML = code;
		    
	 } catch (e) {
		 
	 }
};

	
</script>

</head>
<body>


<div class="box">
      <h3>
      </h3>
      <input type="button" value="fetch" onclick="proc1()" />
      <input type="button" value="async-await" onclick="proc2()" />
      <br /><br />

      <div id="result1"></div>
</div>
</body>
</html>