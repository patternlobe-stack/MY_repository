<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../css/public.css" />
    <script>
      const proc1 = () => {
        //입력
        pcode = prompt("주민번호 입력");

        //문자열 추출
        yy = parseInt(pcode.substr(0, 2));
        mm = pcode.substr(2, 2);
        dd = pcode.substr(4, 2);

        //성별과 년도를 결정하기 위해서 pcode의 -뒤 1글자 추출
        gend = pcode.substr(7, 1);

        if (gend == "1" || gend == "2") year = 1900;
        if (gend == "3" || gend == "4") year = 2000;

        if (gend == "1" || gend == "3") gender = "남자";
        if (gend == "2" || gend == "4") gender = "여자";

        //나이 계산
        age = new Date().getFullYear() - (year + yy);

        //출력내용
        //code : 110326-4******
        let str = `${pcode.slice(0, 8)}******<br>`;
        //생년월일 작성  $(year + yy} 년 ${mm} 월 ${dd} 일
        str += `생년월일 : ${year + yy} 년 ${mm} 월 ${dd} 일<br> `;
        //성별작성
        str += `성별 : ${gender}<br>`;
        //나이 작성
        str += `나이 : ${age}<br>`;

        //출력
        document.querySelector("#result1").innerHTML = str;
      };

      const proc2 = () => {
        multi = "234567892345";

        //주민번호 입력
        pcode = prompt("주민번호 입력"); //110326-1234567

        code = pcode.replace("-", ""); //1103261234567

        console.log(pcode, code);

        let hap = 0;

        for (i = 0; i < multi.length; i++) {
          hap += multi.substr(i, 1) * code.substr(i, 1);
        }

        res = 11 - (hap % 11);

        // if (res == 10) res = 0;
        // if (res == 11) res = 1;
        res = res % 10;

        if (res == code.slice(-1)) {
          out = "진짜";
        } else {
          out = "가짜";
        }

        //출력
        let str = `${pcode.slice(0, 8)}******<br>`;
        str += `${out}입니다`;

        document.querySelector("#result2").innerHTML = str;
      };
    </script>
  </head>
  <body>
    <div class="box">
      <h3>
        prompt로 주민등록번호를 입력 받아 <br />
        생년월일과 성별, 나이를 출력하는 프로그램을 작성<br />
      </h3>
      <input type="button" value="확인" onclick="proc1()" />
      <br /><br />

      <div id="result1"></div>
    </div>

    <div class="box">
      <h3>
        주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을
        작성 <br />
      </h3>
      <input type="button" value="확인" onclick="proc2()" />
      <br /><br />

      <div id="result2"></div>
    </div>
  </body>
</html>
